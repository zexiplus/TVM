/*! tvvm v1.0.0 | MIT (c) 2018 float | https://github.com/zexiplus/TVM#readme */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.tvvm=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=function(){function t(){u(this,t),this.subs=[]}return n(t,[{key:"addSubs",value:function(t){this.subs.push(t)}},{key:"notify",value:function(){this.subs.forEach(function(t){return t.update()})}}]),t}(),i=function(){function e(t){u(this,e),this.observer(t)}return n(e,[{key:"observer",value:function(e){var n=this;e&&"object"===(void 0===e?"undefined":t(e))&&Object.keys(e).forEach(function(t){n.observer(e[t]),n.setReactive(e,t)})}},{key:"setReactive",value:function(e,n){var i=e[n],u=this,o=new r;Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){return r.target&&o.addSubs(r.target),i},set:function(t){t!==e[n]&&(u.observer(t),i=t,o.notify())}})}}]),e}(),a=function(){function i(t,e,n){u(this,i),this.vm=t,this.expr=e,this.cb=n,this.value=this.getValAndSetTarget()}return n(i,[{key:"getValAndSetTarget",value:function(){var t=(r.target=this).getValue(this.expr);return r.target=null,t}},{key:"getValue",value:function(t){return t.split(".").reduce(function(t,e){return t[e]},this.vm.$data)}},{key:"update",value:function(){var t=this.value,e=this.getValue(this.expr);t!==e&&this.cb&&this.cb(e)}}]),i}(),o=function(){function i(t,e){if(u(this,i),this.el=this.getDOM(t),this.vm=e,this.el){var n=this.toFragment(this.el);this.compile(n),this.el.appendChild(n)}else console.error("can not find element named "+t)}return n(i,[{key:"compile",value:function(t){var n=this;t.childNodes.forEach(function(t,e){n.isElement(t)?(n.compile(t),n.compileNode(t)):n.isText(t)&&n.compileText(t)})}},{key:"compileText",value:function(e){var n=this,t=/\{\{([^}]+)\}\}/g,i=e.textContent;if(t.test(i)){var u=i.replace(t,function(){return new a(n.vm,1<arguments.length?arguments[1]:void 0,function(t){c.updateText(t,e,n.vm)}),1<arguments.length?arguments[1]:void 0}),o=this.splitData(u,this.vm.$data);c.updateText(o,e,this.vm)}}},{key:"splitData",value:function(t,e){return(t&&t.split(".")).reduce(function(t,e){return t[e]},e)}},{key:"compileNode",value:function(i){var u=this,t=i.getAttributeNames();(t=t.filter(this.isDirective)).forEach(function(t){var e=i.getAttribute(t),n=u.splitData(e,u.vm.$data);c[t]?c[t](n,i,u.vm,e):console.warn("can't find directive "+t)})}},{key:"isDirective",value:function(t){return t.includes("t-")}},{key:"getDOM",value:function(t){return this.isElement(t)?t:document.querySelector(t)||null}},{key:"isElement",value:function(t){return 1===t.nodeType}},{key:"isText",value:function(t){return 3===t.nodeType}},{key:"toFragment",value:function(t){for(var e=document.createDocumentFragment(),n=void 0;n=t.firstChild;)e.appendChild(n);return e}}]),i}(),c={updateText:function(t,e,n,i){e&&(e.textContent=t)},"t-model":function(t,e,n,i){var u=this;e&&(e.value=t),e.addEventListener("input",function(t){u.setVal(n.$data,i,t.target.value)})},setVal:function(t,e,n){var i=e.split(".");i.reduce(function(t,e){if(i.indexOf(e)!=i.length-1)return t[e];t[e]=n},t)}};return function(){function e(t){u(this,e),this.$el=t.el,this.$data="function"==typeof t.data?t.data():t.data,this.proxy(this.$data),this.$el&&(new i(this.$data),new o(this.$el,this))}return n(e,[{key:"proxy",value:function(n){var t=this;Object.keys(n).forEach(function(e){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[e]},set:function(t){n[e]=t}})})}}]),e}()});